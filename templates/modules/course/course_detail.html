{% extends 'base/layout.html' %}

{% block main %}
<section style="display: flex; justify-content: end;">
    <a href="{% url 'course:register' course.id %}" class="btn" style="margin-right:5px;">學生管理</a>
    <a href="{% url 'course:create_subject' course.id %}" class="btn" style="margin-right:5px;">新增項目</a>
    {% comment %}
        <a href="{% url 'course:delete_subject' course.id %}" class="btn" style="margin-right:5px;">刪除項目</a>
    {% endcomment %}
    <a href="{% url 'course:update' course.id %}" class="btn" style="margin-right:5px;">編輯課程</a>
    <a href="{% url 'course:delete' course.id %}" class="btn">刪除課程</a>
</section>
    <h2>{{ course.course_name }}({{ course.course_number}})</h2>
    <p>{{ course.description }}</p>
    <div class="row">
        <div class="col s12 m6">
            {% if course.scoringsubject_set %}
                <ul class="collection with-header">
                    <li class="collection-header">
                        <h4>成績列表</h4>
                    </li>
                    {% if course.scoringsubject_set.all %}
                        {% for subject in course.scoringsubject_set.all %}
                            <a class="collection-item" href="{% url 'course:subject' subject.pk %}">{{ subject.title }}</a>
                        {% endfor %}
                    {% else %}
                        <p class='no-item'>無相關項目。</p>
                    {% endif %}
                </ul>
            {% endif %}
        </div>
        <div class="col s12 m6">
            {% if course.registered_students %}
                <ul class="collection with-header">
                    <li class="collection-header">
                        <h4>學生名單</h4>
                    </li>
                    {% if course.registered_students.all%}
                        {% for student in course.registered_students.all %}
                            <a class="collection-item" href="{% url 'student:detail' student.pk %}"> {{ student.name }} </a>
                        {% endfor %}
                    {% else %}
                        <p class='no-item'>還沒有學生。</p>
                    {% endif %}
                </ul>
            {% endif %}
        </div>
    </div>
{% endblock %}